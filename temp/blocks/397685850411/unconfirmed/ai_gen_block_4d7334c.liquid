{% doc %}
  @prompt
    A magazine-style editorial layout
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-magazine-layout-{{ ai_gen_id }} {
    display: block;
    width: {{ block.settings.desktop_width_percent }}%;
    max-width: 100%;
    margin: 0 auto;
    padding: {{ block.settings.section_padding }}px 20px;
    background-color: {{ block.settings.background_color }};
  }

  .ai-magazine-container-{{ ai_gen_id }} {
    max-width: 1200px;
    margin: 0 auto;
  }

  .ai-magazine-header-{{ ai_gen_id }} {
    text-align: {{ block.settings.header_alignment }};
    margin-bottom: 40px;
  }

  .ai-magazine-category-{{ ai_gen_id }} {
    font-size: 12px;
    text-transform: uppercase;
    letter-spacing: 2px;
    color: {{ block.settings.category_color }};
    font-weight: 600;
    margin-bottom: 12px;
  }

  .ai-magazine-title-{{ ai_gen_id }} {
    font-size: {{ block.settings.title_size }}px;
    line-height: 1.2;
    color: {{ block.settings.title_color }};
    margin: 0 0 16px;
    font-weight: 700;
  }

  .ai-magazine-subtitle-{{ ai_gen_id }} {
    font-size: {{ block.settings.subtitle_size }}px;
    line-height: 1.6;
    color: {{ block.settings.subtitle_color }};
    margin: 0 0 20px;
  }

  .ai-magazine-meta-{{ ai_gen_id }} {
    display: flex;
    align-items: center;
    gap: 20px;
    justify-content: {{ block.settings.header_alignment }};
    font-size: 14px;
    color: {{ block.settings.meta_color }};
  }

  .ai-magazine-meta-item-{{ ai_gen_id }} {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .ai-magazine-grid-{{ ai_gen_id }} {
    display: grid;
    grid-template-columns: repeat(12, 1fr);
    gap: {{ block.settings.grid_gap }}px;
    margin-bottom: 40px;
  }

  .ai-magazine-featured-image-{{ ai_gen_id }} {
    grid-column: span 12;
    position: relative;
    overflow: hidden;
    border-radius: {{ block.settings.image_border_radius }}px;
  }

  .ai-magazine-featured-image-{{ ai_gen_id }} img {
    width: 100%;
    height: auto;
    display: block;
  }

  .ai-magazine-featured-placeholder-{{ ai_gen_id }} {
    width: 100%;
    aspect-ratio: 16 / 9;
    background-color: #f4f4f4;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: {{ block.settings.image_border_radius }}px;
  }

  .ai-magazine-featured-placeholder-{{ ai_gen_id }} svg {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .ai-magazine-content-{{ ai_gen_id }} {
    grid-column: span 12;
  }

  .ai-magazine-layout-two-column-{{ ai_gen_id }} .ai-magazine-content-{{ ai_gen_id }} {
    grid-column: span 8;
  }

  .ai-magazine-layout-two-column-{{ ai_gen_id }} .ai-magazine-sidebar-{{ ai_gen_id }} {
    grid-column: span 4;
  }

  .ai-magazine-body-{{ ai_gen_id }} {
    font-size: {{ block.settings.body_size }}px;
    line-height: 1.8;
    color: {{ block.settings.body_color }};
    margin-bottom: 30px;
  }

  .ai-magazine-body-{{ ai_gen_id }} p {
    margin-bottom: 20px;
  }

  .ai-magazine-body-{{ ai_gen_id }} p:first-letter {
    font-size: {{ block.settings.drop_cap_enabled | times: 3 }}em;
    font-weight: 700;
    float: left;
    line-height: 0.8;
    margin: 8px 8px 0 0;
    color: {{ block.settings.drop_cap_color }};
  }

  .ai-magazine-pullquote-{{ ai_gen_id }} {
    font-size: {{ block.settings.pullquote_size }}px;
    line-height: 1.4;
    font-weight: 600;
    font-style: italic;
    color: {{ block.settings.pullquote_color }};
    border-left: 4px solid {{ block.settings.pullquote_accent_color }};
    padding: 20px 0 20px 30px;
    margin: 40px 0;
  }

  .ai-magazine-sidebar-{{ ai_gen_id }} {
    grid-column: span 12;
  }

  .ai-magazine-sidebar-box-{{ ai_gen_id }} {
    background-color: {{ block.settings.sidebar_bg_color }};
    padding: 30px;
    border-radius: {{ block.settings.sidebar_border_radius }}px;
    margin-bottom: 30px;
  }

  .ai-magazine-sidebar-title-{{ ai_gen_id }} {
    font-size: 18px;
    font-weight: 700;
    color: {{ block.settings.sidebar_title_color }};
    margin: 0 0 16px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .ai-magazine-sidebar-content-{{ ai_gen_id }} {
    font-size: 14px;
    line-height: 1.6;
    color: {{ block.settings.sidebar_text_color }};
  }

  .ai-magazine-inline-image-{{ ai_gen_id }} {
    margin: 40px 0;
    border-radius: {{ block.settings.image_border_radius }}px;
    overflow: hidden;
  }

  .ai-magazine-inline-image-{{ ai_gen_id }} img {
    width: 100%;
    height: auto;
    display: block;
  }

  .ai-magazine-inline-placeholder-{{ ai_gen_id }} {
    width: 100%;
    aspect-ratio: 3 / 2;
    background-color: #f4f4f4;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: {{ block.settings.image_border_radius }}px;
  }

  .ai-magazine-inline-placeholder-{{ ai_gen_id }} svg {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .ai-magazine-image-caption-{{ ai_gen_id }} {
    font-size: 13px;
    color: {{ block.settings.caption_color }};
    font-style: italic;
    margin-top: 12px;
    text-align: center;
  }

  .ai-magazine-divider-{{ ai_gen_id }} {
    height: 1px;
    background-color: {{ block.settings.divider_color }};
    margin: 50px 0;
    opacity: 0.3;
  }

  @media screen and (max-width: 768px) {
    .ai-magazine-layout-{{ ai_gen_id }} {
      padding: {{ block.settings.section_padding | divided_by: 2 }}px 16px;
    }

    .ai-magazine-title-{{ ai_gen_id }} {
      font-size: {{ block.settings.title_size | times: 0.7 }}px;
    }

    .ai-magazine-subtitle-{{ ai_gen_id }} {
      font-size: {{ block.settings.subtitle_size | times: 0.9 }}px;
    }

    .ai-magazine-body-{{ ai_gen_id }} {
      font-size: {{ block.settings.body_size | times: 0.9 }}px;
    }

    .ai-magazine-pullquote-{{ ai_gen_id }} {
      font-size: {{ block.settings.pullquote_size | times: 0.8 }}px;
      padding-left: 20px;
    }

    .ai-magazine-layout-two-column-{{ ai_gen_id }} .ai-magazine-content-{{ ai_gen_id }},
    .ai-magazine-layout-two-column-{{ ai_gen_id }} .ai-magazine-sidebar-{{ ai_gen_id }} {
      grid-column: span 12;
    }

    .ai-magazine-meta-{{ ai_gen_id }} {
      flex-direction: column;
      align-items: flex-start;
      gap: 8px;
    }

    .ai-magazine-sidebar-box-{{ ai_gen_id }} {
      padding: 20px;
    }
  }
{% endstyle %}

<magazine-editorial-{{ ai_gen_id }}
  class="ai-magazine-layout-{{ ai_gen_id }}"
  {{ block.shopify_attributes }}
>
  <div class="ai-magazine-container-{{ ai_gen_id }}">
    <header class="ai-magazine-header-{{ ai_gen_id }}">
      {% if block.settings.category != blank %}
        <div class="ai-magazine-category-{{ ai_gen_id }}">{{ block.settings.category }}</div>
      {% endif %}

      {% if block.settings.title != blank %}
        <h1 class="ai-magazine-title-{{ ai_gen_id }}">{{ block.settings.title }}</h1>
      {% endif %}

      {% if block.settings.subtitle != blank %}
        <div class="ai-magazine-subtitle-{{ ai_gen_id }}">{{ block.settings.subtitle }}</div>
      {% endif %}

      <div class="ai-magazine-meta-{{ ai_gen_id }}">
        {% if block.settings.author != blank %}
          <div class="ai-magazine-meta-item-{{ ai_gen_id }}">
            <span>By {{ block.settings.author }}</span>
          </div>
        {% endif %}

        {% if block.settings.date != blank %}
          <div class="ai-magazine-meta-item-{{ ai_gen_id }}">
            <span>{{ block.settings.date }}</span>
          </div>
        {% endif %}

        {% if block.settings.read_time != blank %}
          <div class="ai-magazine-meta-item-{{ ai_gen_id }}">
            <span>{{ block.settings.read_time }} min read</span>
          </div>
        {% endif %}
      </div>
    </header>

    <div class="ai-magazine-featured-image-{{ ai_gen_id }}">
      {% if block.settings.featured_image %}
        <img
          src="{{ block.settings.featured_image | image_url: width: 1600 }}"
          alt="{{ block.settings.featured_image.alt | escape }}"
          loading="lazy"
          width="{{ block.settings.featured_image.width }}"
          height="{{ block.settings.featured_image.height }}"
        >
      {% else %}
        <div class="ai-magazine-featured-placeholder-{{ ai_gen_id }}">
          {{ 'hero-apparel-1' | placeholder_svg_tag }}
        </div>
      {% endif %}
    </div>

    {% if block.settings.featured_caption != blank %}
      <div class="ai-magazine-image-caption-{{ ai_gen_id }}">{{ block.settings.featured_caption }}</div>
    {% endif %}

    <div class="ai-magazine-grid-{{ ai_gen_id }} {% if block.settings.layout == 'two-column' %}ai-magazine-layout-two-column-{{ ai_gen_id }}{% endif %}">
      <div class="ai-magazine-content-{{ ai_gen_id }}">
        {% if block.settings.body_text != blank %}
          <div class="ai-magazine-body-{{ ai_gen_id }}">{{ block.settings.body_text }}</div>
        {% endif %}

        {% if block.settings.pullquote != blank %}
          <blockquote class="ai-magazine-pullquote-{{ ai_gen_id }}">
            {{ block.settings.pullquote }}
          </blockquote>
        {% endif %}

        {% if block.settings.body_text_2 != blank %}
          <div class="ai-magazine-body-{{ ai_gen_id }}">{{ block.settings.body_text_2 }}</div>
        {% endif %}

        {% if block.settings.inline_image %}
          <div class="ai-magazine-inline-image-{{ ai_gen_id }}">
            <img
              src="{{ block.settings.inline_image | image_url: width: 1200 }}"
              alt="{{ block.settings.inline_image.alt | escape }}"
              loading="lazy"
              width="{{ block.settings.inline_image.width }}"
              height="{{ block.settings.inline_image.height }}"
            >
            {% if block.settings.inline_caption != blank %}
              <div class="ai-magazine-image-caption-{{ ai_gen_id }}">{{ block.settings.inline_caption }}</div>
            {% endif %}
          </div>
        {% endif %}

        {% if block.settings.body_text_3 != blank %}
          <div class="ai-magazine-body-{{ ai_gen_id }}">{{ block.settings.body_text_3 }}</div>
        {% endif %}
      </div>

      {% if block.settings.layout == 'two-column' %}
        <aside class="ai-magazine-sidebar-{{ ai_gen_id }}">
          {% if block.settings.sidebar_title_1 != blank or block.settings.sidebar_content_1 != blank %}
            <div class="ai-magazine-sidebar-box-{{ ai_gen_id }}">
              {% if block.settings.sidebar_title_1 != blank %}
                <h3 class="ai-magazine-sidebar-title-{{ ai_gen_id }}">{{ block.settings.sidebar_title_1 }}</h3>
              {% endif %}
              {% if block.settings.sidebar_content_1 != blank %}
                <div class="ai-magazine-sidebar-content-{{ ai_gen_id }}">{{ block.settings.sidebar_content_1 }}</div>
              {% endif %}
            </div>
          {% endif %}

          {% if block.settings.sidebar_title_2 != blank or block.settings.sidebar_content_2 != blank %}
            <div class="ai-magazine-sidebar-box-{{ ai_gen_id }}">
              {% if block.settings.sidebar_title_2 != blank %}
                <h3 class="ai-magazine-sidebar-title-{{ ai_gen_id }}">{{ block.settings.sidebar_title_2 }}</h3>
              {% endif %}
              {% if block.settings.sidebar_content_2 != blank %}
                <div class="ai-magazine-sidebar-content-{{ ai_gen_id }}">{{ block.settings.sidebar_content_2 }}</div>
              {% endif %}
            </div>
          {% endif %}
        </aside>
      {% endif %}
    </div>

    <div class="ai-magazine-divider-{{ ai_gen_id }}"></div>
  </div>
</magazine-editorial-{{ ai_gen_id }}>

<script>
  (function() {
    class MagazineEditorial{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
      }

      connectedCallback() {
        this.adjustDropCap();
      }

      adjustDropCap() {
        const dropCapEnabled = {{ block.settings.drop_cap_enabled | json }};
        if (!dropCapEnabled) {
          const bodyElements = this.querySelectorAll('.ai-magazine-body-{{ ai_gen_id }}');
          bodyElements.forEach(body => {
            const firstP = body.querySelector('p:first-of-type');
            if (firstP) {
              firstP.style.setProperty('--drop-cap-size', '1em');
            }
          });
        }
      }
    }

    customElements.define('magazine-editorial-{{ ai_gen_id }}', MagazineEditorial{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "Magazine editorial",
  "settings": [
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "layout",
      "label": "Layout style",
      "options": [
        {
          "value": "single-column",
          "label": "Single column"
        },
        {
          "value": "two-column",
          "label": "Two column with sidebar"
        }
      ],
      "default": "single-column"
    },
    {
      "type": "range",
      "id": "desktop_width_percent",
      "label": "Desktop width",
      "min": 50,
      "max": 100,
      "step": 5,
      "unit": "%",
      "default": 100
    },
    {
      "type": "range",
      "id": "section_padding",
      "label": "Section padding",
      "min": 0,
      "max": 100,
      "step": 10,
      "unit": "px",
      "default": 60
    },
    {
      "type": "range",
      "id": "grid_gap",
      "label": "Content spacing",
      "min": 20,
      "max": 60,
      "step": 5,
      "unit": "px",
      "default": 40
    },
    {
      "type": "header",
      "content": "Header content"
    },
    {
      "type": "text",
      "id": "category",
      "label": "Category",
      "default": "Fashion"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Title",
      "default": "The Art of Modern Design"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Subtitle",
      "default": "Exploring the intersection of creativity and craftsmanship in contemporary fashion"
    },
    {
      "type": "text",
      "id": "author",
      "label": "Author name",
      "default": "Jane Smith"
    },
    {
      "type": "text",
      "id": "date",
      "label": "Date",
      "default": "February 5, 2026"
    },
    {
      "type": "text",
      "id": "read_time",
      "label": "Read time",
      "default": "5"
    },
    {
      "type": "select",
      "id": "header_alignment",
      "label": "Header alignment",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        }
      ],
      "default": "center"
    },
    {
      "type": "header",
      "content": "Featured image"
    },
    {
      "type": "image_picker",
      "id": "featured_image",
      "label": "Featured image"
    },
    {
      "type": "text",
      "id": "featured_caption",
      "label": "Image caption"
    },
    {
      "type": "header",
      "content": "Body content"
    },
    {
      "type": "richtext",
      "id": "body_text",
      "label": "Body text 1",
      "default": "<p>In the ever-evolving world of fashion, the marriage of traditional craftsmanship and modern design principles creates something truly extraordinary. This delicate balance between heritage and innovation defines the contemporary aesthetic that resonates with discerning consumers worldwide.</p><p>The journey begins with understanding the fundamental principles that have guided artisans for generations, while embracing the technological advances that allow for unprecedented creativity and precision.</p>"
    },
    {
      "type": "richtext",
      "id": "pullquote",
      "label": "Pull quote",
      "default": "<p>Design is not just what it looks like and feels like. Design is how it works.</p>"
    },
    {
      "type": "richtext",
      "id": "body_text_2",
      "label": "Body text 2",
      "default": "<p>The modern designer must navigate a complex landscape of sustainability, ethics, and aesthetics. Each decision carries weight, from material selection to production methods, all while maintaining the vision that makes a piece truly special.</p>"
    },
    {
      "type": "header",
      "content": "Inline image"
    },
    {
      "type": "image_picker",
      "id": "inline_image",
      "label": "Inline image"
    },
    {
      "type": "text",
      "id": "inline_caption",
      "label": "Inline image caption"
    },
    {
      "type": "richtext",
      "id": "body_text_3",
      "label": "Body text 3",
      "default": "<p>As we look to the future, the possibilities are endless. The intersection of technology and tradition opens new avenues for expression, allowing designers to push boundaries while honoring the craft that came before.</p>"
    },
    {
      "type": "header",
      "content": "Sidebar content"
    },
    {
      "type": "text",
      "id": "sidebar_title_1",
      "label": "Sidebar box 1 title",
      "default": "Key Takeaways"
    },
    {
      "type": "richtext",
      "id": "sidebar_content_1",
      "label": "Sidebar box 1 content",
      "default": "<p>• Balance tradition with innovation<br>• Focus on sustainable practices<br>• Embrace technological advances<br>• Honor craftsmanship</p>"
    },
    {
      "type": "text",
      "id": "sidebar_title_2",
      "label": "Sidebar box 2 title",
      "default": "Related Reading"
    },
    {
      "type": "richtext",
      "id": "sidebar_content_2",
      "label": "Sidebar box 2 content",
      "default": "<p>Explore more articles about design philosophy and modern craftsmanship in our editorial collection.</p>"
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "title_size",
      "label": "Title size",
      "min": 24,
      "max": 72,
      "step": 2,
      "unit": "px",
      "default": 48
    },
    {
      "type": "range",
      "id": "subtitle_size",
      "label": "Subtitle size",
      "min": 14,
      "max": 28,
      "step": 2,
      "unit": "px",
      "default": 18
    },
    {
      "type": "range",
      "id": "body_size",
      "label": "Body text size",
      "min": 14,
      "max": 22,
      "step": 1,
      "unit": "px",
      "default": 16
    },
    {
      "type": "range",
      "id": "pullquote_size",
      "label": "Pull quote size",
      "min": 18,
      "max": 36,
      "step": 2,
      "unit": "px",
      "default": 24
    },
    {
      "type": "checkbox",
      "id": "drop_cap_enabled",
      "label": "Enable drop cap",
      "default": true
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "category_color",
      "label": "Category",
      "default": "#000f9f"
    },
    {
      "type": "color",
      "id": "title_color",
      "label": "Title",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "subtitle_color",
      "label": "Subtitle",
      "default": "#666666"
    },
    {
      "type": "color",
      "id": "meta_color",
      "label": "Meta text",
      "default": "#999999"
    },
    {
      "type": "color",
      "id": "body_color",
      "label": "Body text",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "drop_cap_color",
      "label": "Drop cap",
      "default": "#000f9f"
    },
    {
      "type": "color",
      "id": "pullquote_color",
      "label": "Pull quote",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "pullquote_accent_color",
      "label": "Pull quote accent",
      "default": "#000f9f"
    },
    {
      "type": "color",
      "id": "caption_color",
      "label": "Image caption",
      "default": "#999999"
    },
    {
      "type": "color",
      "id": "divider_color",
      "label": "Divider",
      "default": "#cccccc"
    },
    {
      "type": "color",
      "id": "sidebar_bg_color",
      "label": "Sidebar background",
      "default": "#f8f8f8"
    },
    {
      "type": "color",
      "id": "sidebar_title_color",
      "label": "Sidebar title",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "sidebar_text_color",
      "label": "Sidebar text",
      "default": "#666666"
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "range",
      "id": "image_border_radius",
      "label": "Image border radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "default": 8
    },
    {
      "type": "range",
      "id": "sidebar_border_radius",
      "label": "Sidebar border radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "default": 8
    }
  ],
  "presets": [
    {
      "name": "Magazine editorial"
    }
  ]
}
{% endschema %}