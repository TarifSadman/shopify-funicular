{% assign questions = product.metafields.custom.faq_questions.value %}
{% assign answers = product.metafields.custom.faq_answers.value %}

{% if questions != blank and answers != blank %}
  <section class="product-faq-section py-5">
    <div class="container">
      {% if section.settings.heading != blank %}
        <h3 class="text-center mb-4">{{ section.settings.heading }}</h3>
      {% endif %}

      <div class="row justify-content-center">
        <div class="col-lg-8">
          <div class="accordion" id="productFaqAccordion">
            {% for question in questions %}
              {% assign answer = answers[forloop.index0] %}
              {% assign index = forloop.index %}
              <div class="accordion-item mb-3 border bg-white rounded">
                <h2 class="accordion-header" id="heading{{ index }}">
                  <button
                    class="accordion-button {% unless forloop.first %}collapsed{% endunless %} text-dark fw-bold bg-transparent shadow-none"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapse{{ index }}"
                    aria-expanded="{% if forloop.first %}true{% else %}false{% endif %}"
                    aria-controls="collapse{{ index }}"
                  >
                    {{ question }}
                  </button>
                </h2>
                <div
                  id="collapse{{ index }}"
                  class="accordion-collapse collapse {% if forloop.first %}show{% endif %}"
                  aria-labelledby="heading{{ index }}"
                  data-bs-parent="#productFaqAccordion"
                >
                  <div class="accordion-body text-secondary">
                    {{ answer }}
                  </div>
                </div>
              </div>
            {% endfor %}
          </div>
        </div>
      </div>
    </div>
  </section>
{% endif %}

{% schema %}
{
  "name": "Product FAQ",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Frequently Asked Questions"
    }
  ],
  "presets": [
    {
      "name": "Product FAQ"
    }
  ]
}
{% endschema %}
