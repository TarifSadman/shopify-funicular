<div class="p-4 h-full flex flex-col">
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-xl font-bold">Your Cart</h2>
  </div>

  {% if cart.item_count > 0 %}
    <div class="flex-1 overflow-y-auto space-y-4 pr-2">
      {% for item in cart.items %}
        <div class="flex gap-4 pb-4">
          <a href="{{ item.url }}" class="block shrink-0">
            {% if item.image %}
              <img
                src="{{ item.image | image_url: width: 200 }}"
                alt="{{ item.title | escape }}"
                class="w-20 h-20 object-cover border border-gray-200"
                width="200"
                height="200"
              >
            {% else %}
              {{ 'product-1' | placeholder_svg_tag: 'w-20 h-20 object-cover border border-gray-200' }}
            {% endif %}
          </a>

          <div class="flex-1 min-w-0">
            <div class="flex justify-between items-start gap-2">
              <div class="flex-1 min-w-0">
                <a href="{{ item.url }}" class="block text-base font-medium text-gray-900 truncate hover:underline">
                  {{ item.product.title }}
                </a>
                {% unless item.product.has_only_default_variant %}
                  <p class="text-sm text-gray-500 mt-1">{{ item.variant.title }}</p>
                {% endunless %}
              </div>
              <button
                type="button"
                onclick="removeCartItem({{ forloop.index }})"
                class="inline-flex items-center justify-center w-6 h-6 hover:bg-red-100 transition shrink-0 bg-transparent border-0 cursor-pointer"
                title="Remove item"
              >
                <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M10.9688 3.21871C11.1933 2.99416 11.5567 2.99416 11.7813 3.21871C12.0056 3.44328 12.0057 3.80673 11.7813 4.03121L8.31251 7.49996L11.7813 10.9687L11.8555 11.0586C12.0026 11.2817 11.9777 11.5848 11.7813 11.7812C11.5849 11.9776 11.2818 12.0026 11.0586 11.8554L10.9688 11.7812L7.50001 8.31246L4.03126 11.7812C3.80677 12.0057 3.44332 12.0056 3.21876 11.7812C2.99421 11.5567 2.99421 11.1933 3.21876 10.9687L6.68751 7.49996L3.21876 4.03121L3.14454 3.94137C2.99723 3.71819 3.0223 3.41517 3.21876 3.21871C3.41522 3.02225 3.71823 2.99719 3.94141 3.14449L4.03126 3.21871L7.50001 6.68746L10.9688 3.21871Z" fill="currentColor"/>
                </svg>
              </button>
            </div>

            <div class="flex justify-between items-end mt-2">
              <div class="el-qty-counter">
                <button
                  type="button"
                  class="el-qty-btn"
                  onclick="updateCartQty({{ forloop.index }}, {{ item.quantity | minus: 1 }})"
                  {% if item.quantity == 1 %}
                    disabled
                  {% endif %}
                >
                  âˆ’
                </button>

                <span class="el-qty-value">{{ item.quantity }}</span>

                <button
                  type="button"
                  class="el-qty-btn"
                  onclick="updateCartQty({{ forloop.index }}, {{ item.quantity | plus: 1 }})"
                >
                  +
                </button>
              </div>

              <p class="font-medium text-gray-900">{{ item.final_line_price | money }}</p>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>

    <div class="border-t border-gray-200 pt-4 mt-4 bg-white">
      <div class="flex justify-between text-lg font-bold mb-4 text-gray-900">
        <span>Total</span>
        <span>{{ cart.total_price | money }}</span>
      </div>

      <div class="space-y-3">
        <a
          href="{{ routes.cart_url }}"
          class="block w-full bg-gray-100 text-gray-900 hover:bg-gray-200 transition text-center py-3 font-semibold"
        >
          View Cart
        </a>
        <form action="{{ routes.cart_url }}" method="post">
          <button
            type="submit"
            name="checkout"
            class="cursor-pointer block w-full bg-black text-white hover:bg-gray-900 transition py-3 font-semibold lg:text-lg"
          >
            Checkout
          </button>
        </form>
      </div>
    </div>
  {% else %}
    <div class="flex-1 flex flex-col justify-center items-center text-center">
      <div class="w-16 h-16 bg-gray-100 flex items-center justify-center mb-4">
        {% render 'icon_shopping_bag', class: 'w-8 h-8 text-gray-400' %}
      </div>
      <h3 class="text-lg font-medium text-gray-900 mb-2">Your cart is empty</h3>
      <a
        href="{{ routes.all_products_collection_url }}"
        class="text-indigo-600 font-medium hover:text-indigo-500 hover:underline"
        onclick="closeSideCart()"
      >
        Start Shopping >
      </a>
    </div>
  {% endif %}
</div>
