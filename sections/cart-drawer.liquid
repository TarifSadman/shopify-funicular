<div class="drawer">
  <div class="drawer__header">
    <div>
      <h2 class="drawer__title">Your Cart</h2>
      <p class="drawer__count">
        {{ cart.item_count }}
        {{ cart.item_count | pluralize: 'item', 'items' }}
      </p>
    </div>
    <button
      type="button"
      onclick="closeSideCart()"
      class="drawer__close"
      aria-label="Close cart"
    >
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
  </div>

  {% if cart.item_count > 0 %}
    <div class="drawer__items">
      {% for item in cart.items %}
        <div class="drawer__item">
          <div class="drawer__item-img-wrap">
            {% if item.image %}
              <img
                src="{{ item.image | image_url: width: 240 }}"
                alt="{{ item.title | escape }}"
                class="drawer__item-img"
                width="240"
                height="320"
                loading="lazy"
              >
            {% else %}
              {{ 'product-1' | placeholder_svg_tag: 'drawer__item-img' }}
            {% endif %}
          </div>

          <div class="drawer__item-info">
            <div class="drawer__item-header">
              <div class="drawer__item-header-info">
                <a href="{{ item.url }}" class="drawer__item-title">
                  {{ item.product.title }}
                </a>
                {% unless item.product.has_only_default_variant %}
                  <p class="drawer__item-variant">
                    {{ item.variant.title }}
                  </p>
                {% endunless %}
              </div>
              <button
                type="button"
                onclick="removeCartItem({{ forloop.index }})"
                class="drawer__item-remove"
                title="Remove item"
              >
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                </svg>
              </button>
            </div>

            <div class="drawer__item-footer">
              <div class="drawer__qty">
                <button
                  type="button"
                  class="drawer__qty-btn"
                  onclick="updateCartQty({{ forloop.index }}, {{ item.quantity | minus: 1 }})"
                  {% if item.quantity == 1 %}
                    disabled
                  {% endif %}
                >
                  <svg
                    width="12"
                    height="12"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="3"
                    stroke-linecap="round"
                  >
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                  </svg>
                </button>
                <span class="drawer__qty-val">{{ item.quantity }}</span>
                <button
                  type="button"
                  class="drawer__qty-btn"
                  onclick="updateCartQty({{ forloop.index }}, {{ item.quantity | plus: 1 }})"
                >
                  <svg
                    width="12"
                    height="12"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="3"
                    stroke-linecap="round"
                  >
                    <line x1="5" y1="12" x2="19" y2="12"></line><line x1="12" y1="5" x2="12" y2="19"></line>
                  </svg>
                </button>
              </div>
              <p class="drawer__item-price">{{ item.final_line_price | money }}</p>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>

    <div class="drawer__footer">
      <div class="drawer__summary">
        <span class="drawer__summary-label">Subtotal</span>
        <span class="drawer__summary-price">{{ cart.total_price | money }}</span>
      </div>

      <div class="drawer__actions">
        <form action="{{ routes.cart_url }}" method="post">
          <button
            type="submit"
            name="checkout"
            class="drawer__checkout-btn"
          >
            Go to Checkout
          </button>
        </form>
        <a href="{{ routes.cart_url }}" class="drawer__view-cart"> View Full Cart </a>
      </div>
      <p class="drawer__note">Shipping & taxes calculated at checkout</p>
    </div>
  {% else %}
    <div class="drawer__empty">
      <div class="drawer__empty-icon">
        <svg
          width="48"
          height="48"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"></path><path d="M3 6h18"></path><path d="M16 10a4 4 0 0 1-8 0"></path>
        </svg>
      </div>
      <h3 class="drawer__empty-title">Your cart is empty</h3>
      <p class="drawer__empty-text">Looks like you haven't added anything to your cart yet.</p>
      <a
        href="{{ routes.all_products_collection_url }}"
        class="drawer__empty-btn"
        onclick="closeSideCart()"
      >
        Start Shopping
        <svg
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline>
        </svg>
      </a>
    </div>
  {% endif %}
</div>
