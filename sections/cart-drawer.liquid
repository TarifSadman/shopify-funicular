<div class="p-6 h-full flex flex-col bg-white">
  <div class="flex justify-between items-center mb-8 pb-4 border-b border-slate-100">
    <div>
      <h2 class="text-2xl font-bold text-slate-900">Your Cart</h2>
      <p class="text-sm text-slate-500 mt-1">
        {{ cart.item_count }}
        {{ cart.item_count | pluralize: 'item', 'items' }}
      </p>
    </div>
    <button
      type="button"
      onclick="closeSideCart()"
      class="p-2 -mr-2 text-slate-400 hover:text-slate-900 transition-colors cursor-pointer"
      aria-label="Close cart"
    >
      <svg
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <line x1="18" y1="6" x2="6" y2="18"></line>
        <line x1="6" y1="6" x2="18" y2="18"></line>
      </svg>
    </button>
  </div>

  {% if cart.item_count > 0 %}
    <div class="flex-1 overflow-y-auto -mx-2 px-2 space-y-6">
      {% for item in cart.items %}
        <div class="flex gap-4 group">
          <div class="relative w-24 h-32 flex-shrink-0 bg-slate-50 overflow-hidden rounded-xl border border-slate-100">
            {% if item.image %}
              <img
                src="{{ item.image | image_url: width: 240 }}"
                alt="{{ item.title | escape }}"
                class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                width="240"
                height="320"
                loading="lazy"
              >
            {% else %}
              {{ 'product-1' | placeholder_svg_tag: 'w-full h-full object-cover' }}
            {% endif %}
          </div>

          <div class="flex-1 flex flex-col py-1">
            <div class="flex justify-between items-start gap-2">
              <div class="flex-1">
                <a
                  href="{{ item.url }}"
                  class="text-sm font-semibold text-slate-900 hover:text-blue-600 transition-colors line-clamp-2"
                >
                  {{ item.product.title }}
                </a>
                {% unless item.product.has_only_default_variant %}
                  <p class="text-xs text-slate-500 mt-1 uppercase tracking-wider font-medium">
                    {{ item.variant.title }}
                  </p>
                {% endunless %}
              </div>
              <button
                type="button"
                onclick="removeCartItem({{ forloop.index }})"
                class="text-slate-400 hover:text-red-500 transition-colors p-1"
                title="Remove item"
              >
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M3 6h18"></path><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"></path><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"></path>
                </svg>
              </button>
            </div>

            <div class="flex justify-between items-center mt-auto pt-2">
              <div class="flex items-center border border-slate-200 rounded-lg overflow-hidden bg-white">
                <button
                  type="button"
                  class="w-8 h-8 flex items-center justify-center text-slate-500 hover:bg-slate-50 disabled:opacity-30"
                  onclick="updateCartQty({{ forloop.index }}, {{ item.quantity | minus: 1 }})"
                  {% if item.quantity == 1 %}
                    disabled
                  {% endif %}
                >
                  <svg
                    width="12"
                    height="12"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="3"
                    stroke-linecap="round"
                  >
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                  </svg>
                </button>
                <span class="w-8 text-center text-xs font-bold text-slate-900">{{ item.quantity }}</span>
                <button
                  type="button"
                  class="w-8 h-8 flex items-center justify-center text-slate-500 hover:bg-slate-50"
                  onclick="updateCartQty({{ forloop.index }}, {{ item.quantity | plus: 1 }})"
                >
                  <svg
                    width="12"
                    height="12"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="3"
                    stroke-linecap="round"
                  >
                    <line x1="5" y1="12" x2="19" y2="12"></line><line x1="12" y1="5" x2="12" y2="19"></line>
                  </svg>
                </button>
              </div>
              <p class="text-sm font-bold text-slate-900">{{ item.final_line_price | money }}</p>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>

    <div class="mt-8 pt-6 border-t border-slate-100">
      <div class="flex justify-between items-center mb-6">
        <span class="text-slate-500 font-medium">Subtotal</span>
        <span class="text-xl font-black text-slate-900">{{ cart.total_price | money }}</span>
      </div>

      <div class="flex flex-col gap-3">
        <form action="{{ routes.cart_url }}" method="post">
          <button
            type="submit"
            name="checkout"
            class="w-full bg-slate-900 text-white rounded-xl py-4 font-bold text-sm uppercase tracking-widest hover:bg-slate-800 transition-all active:scale-[0.98] shadow-lg shadow-slate-200"
          >
            Go to Checkout
          </button>
        </form>
        <div class="flex justify-center">
          <a
            href="{{ routes.cart_url }}"
            class="progressive-underline py-2 text-xs font-bold text-slate-400 hover:text-slate-900 uppercase tracking-widest transition-all"
          >
            View Full Cart
          </a>
        </div>
      </div>
      <p class="text-[10px] text-slate-400 text-center mt-4 uppercase tracking-tighter">
        Shipping & taxes calculated at checkout
      </p>
    </div>
  {% else %}
    <div class="flex-1 flex flex-col justify-center items-center text-center p-8">
      <div class="w-24 h-24 bg-slate-50 rounded-full flex items-center justify-center mb-6 text-slate-200">
        <svg
          width="48"
          height="48"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="1.5"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"></path><path d="M3 6h18"></path><path d="M16 10a4 4 0 0 1-8 0"></path>
        </svg>
      </div>
      <h3 class="text-xl font-bold text-slate-900 mb-2">Your cart is empty</h3>
      <p class="text-sm text-slate-500 mb-8 max-w-[200px]">Looks like you haven't added anything to your cart yet.</p>
      <a
        href="{{ routes.all_products_collection_url }}"
        class="inline-flex items-center gap-2 bg-slate-900 text-white px-8 py-3 rounded-full font-bold text-sm uppercase tracking-widest hover:bg-slate-800 transition-all active:scale-95"
        onclick="closeSideCart()"
      >
        Start Shopping
        <svg
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline>
        </svg>
      </a>
    </div>
  {% endif %}
</div>
